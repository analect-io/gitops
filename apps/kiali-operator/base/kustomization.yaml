apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kiali-operator
helmCharts:
- name: kiali-operator
  includeCRDs: true
  releaseName: kiali-operator
  version: 1.53.0
  repo: https://kiali.org/helm-charts
  valuesInline:
    # fullnameOverride: kiali
    auth:
      strategy: anonymous
    cr:
      create: true
      namespace: istio-system
      values:
        kialiOperator:
          fullnameOverride: kiali
          cr:
            create: true
            namespace: istio-system
            spec:
              deployment:
                accessible_namespaces:
                - '**'
              external_services:
                grafana:
                  auth:
                    type: bearer
                    token: secret:kiali-secrets:grafanaToken
                  enabled: true
                  in_cluster_url: http://grafana.monitoring.svc
                  url: https://grafana.diegoluisi.eti.br
                prometheus:
                  url: http://prometheus-server.monitoring.svc