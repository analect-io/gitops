apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: sonarqube
resources:
  - ns.yaml
helmCharts:
- name: sonarqube
  releaseName: sonarqube
  version: 2.0.5
  repo: https://charts.bitnami.com/bitnami
  valuesInline:
    commonLabels:
      app: sonarqube
      version: 9.7.1
    sonarqubeEmail: noreply@devxp-tech.io
    sonarqubeUsername: admin
    existingSecret: sonarqube-postgresql-secret
    minHeapSize: 512m
    maxHeapSize: 1024m
    # resources:
    #   requests:
    #     memory: 1024Mi
    #     cpu: 100m
    #   limits:
    #     memory: 2048Mi
    #     cpu: 200m
    service:
      type: ClusterIP
    postgresql:
      auth:
        existingSecret: sonarqube-postgresql-secret
    resources:
      requests:
        memory: 256Mi
        cpu: 250m
      limits:
        memory: 1Gi
        cpu: 1
    # metrics:
    #   jmx:
    #     enabled: true


