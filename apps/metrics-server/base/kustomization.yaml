apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kube-system
helmCharts:
- name: metrics-server
  releaseName: metrics-server
  version: 3.8.2
  repo: https://kubernetes-sigs.github.io/metrics-server
  valuesInline:
    # nameOverride: metrics-server
    hostNetwork:
      enabled: true
    metrics:
      enabled: true
    args:
      - "--cert-dir=/tmp"
      - "--secure-port=4443"
      - "--kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname"
      - "--kubelet-use-node-status-port"
      - "--metric-resolution=15s"
      - "--kubelet-insecure-tls"
      - "--authorization-always-allow-paths=/livez,/readyz,/metrics"